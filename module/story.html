<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>ë‘ë‡Œ íŠ¼íŠ¼ - ìˆœì„œ ë§ì¶”ê¸° (ë‹¤í¬ëª¨ë“œ)</title>
  <style>
    /* 1. ë‹¤í¬ ëª¨ë“œ ìƒ‰ìƒ í…Œë§ˆ */
    :root {
      --bg-color: #121212;       /* ì•„ì£¼ ì–´ë‘ìš´ ë°°ê²½ */
      --card-bg: #1e1e1e;        /* ì¹´ë“œ ë°°ê²½ */
      --text-main: #ffffff;      /* ë©”ì¸ í…ìŠ¤íŠ¸ (í°ìƒ‰) */
      --text-sub: #aaaaaa;       /* ë³´ì¡° í…ìŠ¤íŠ¸ (íšŒìƒ‰) */
      --primary: #4dacff;        /* ì˜ ë³´ì´ëŠ” ë°ì€ íŒŒë‘ */
      --primary-bg: #004a8f;     /* íŒŒë‘ ë°°ê²½ */
      --border: #444444;         /* í…Œë‘ë¦¬ */
      --correct: #4cd964;        /* ì •ë‹µ ì´ˆë¡ */
      --wrong: #ff5f5f;          /* ì˜¤ë‹µ ë¹¨ê°• */
    }

    body {
      margin: 0;
      padding: 20px 10px;
      font-family: "Pretendard", "Noto Sans KR", sans-serif;
      background-color: var(--bg-color);
      color: var(--text-main);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    .container {
      width: 100%;
      max-width: 600px;
      background: var(--card-bg);
      border-radius: 20px;
      padding: 24px;
      box-sizing: border-box;
      /* ì€ì€í•œ í…Œë‘ë¦¬ë¡œ êµ¬ë¶„ê° ì£¼ê¸° */
      border: 1px solid #333; 
    }

    /* í—¤ë” ì˜ì—­ */
    header { text-align: center; margin-bottom: 30px; }
    h1 { margin: 0 0 10px; font-size: 26px; color: var(--primary); }
    p.desc { margin: 0; font-size: 19px; color: var(--text-sub); line-height: 1.5; }

    /* ì§„í–‰ ë‹¨ê³„ ì  */
    .progress-bar { display: flex; justify-content: center; gap: 8px; margin-bottom: 30px; }
    .dot { width: 12px; height: 12px; border-radius: 50%; background: #444; transition: background 0.3s; }
    .dot.active { background: var(--primary); transform: scale(1.2); }

    /* ì •ë‹µ ë“¤ì–´ê°ˆ ìŠ¬ë¡¯ ì˜ì—­ */
    .slots-area {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 40px;
      padding: 16px;
      background-color: #262626; /* ì¹´ë“œë³´ë‹¤ ì¡°ê¸ˆ ë” ë°ê±°ë‚˜ ì–´ë‘¡ê²Œ */
      border-radius: 16px;
      border: 2px dashed #555;
    }
    
    .slot {
      min-height: 68px;
      background: #333;
      border: 2px solid var(--border);
      border-radius: 12px;
      display: flex;
      align-items: center;
      padding: 10px 16px 10px 50px; /* ìˆ«ì ê³µê°„ í™•ë³´ */
      font-size: 20px;
      font-weight: 500;
      cursor: pointer;
      position: relative;
      color: #ddd;
      transition: all 0.2s;
    }
    
    /* 1, 2, 3 ìˆ«ì í‘œì‹œ */
    .slot::before {
      content: attr(data-num);
      position: absolute;
      left: 16px;
      color: #666;
      font-size: 24px;
      font-weight: 800;
    }
    
    /* ì±„ì›Œì¡Œì„ ë•Œ ìŠ¤íƒ€ì¼ (ê³ ëŒ€ë¹„) */
    .slot.filled {
      border-color: var(--primary);
      background-color: #2a3b4d; /* í‘¸ë¥¸ë¹› ì–´ë‘ìš´ ë°°ê²½ */
      color: #fff;
      font-weight: bold;
    }
    .slot.filled::before { color: var(--primary); }
    .slot.filled::after {
      content: "âœ•"; /* ì·¨ì†Œ ì•„ì´ì½˜ */
      position: absolute;
      right: 16px;
      color: var(--primary);
    }

    /* ë³´ê¸° ë²„íŠ¼ë“¤ */
    .options-area { display: flex; flex-direction: column; gap: 12px; }
    .option-btn {
      background: #333;
      border: 2px solid #555;
      color: #eee;
      padding: 18px;
      border-radius: 12px;
      font-size: 20px;
      text-align: left;
      cursor: pointer;
      transition: background 0.2s;
    }
    .option-btn:active { background: #444; transform: scale(0.98); }
    
    /* ì„ íƒëœ ë³´ê¸° ìˆ¨ê¹€ ìŠ¤íƒ€ì¼ */
    .option-btn.selected {
      opacity: 0.3;
      background: #222;
      border-color: #333;
      pointer-events: none;
      text-decoration: line-through;
    }

    /* ê²°ê³¼ ë©”ì‹œì§€ ë° ë²„íŠ¼ */
    .result-area { margin-top: 40px; text-align: center; }
    .message { font-size: 22px; font-weight: bold; margin-bottom: 20px; min-height: 30px; }
    .message.good { color: var(--correct); }
    .message.bad { color: var(--wrong); }

    .action-btn {
      width: 100%;
      padding: 18px;
      font-size: 22px;
      font-weight: bold;
      border-radius: 14px;
      border: none;
      cursor: pointer;
      color: #000; /* ë²„íŠ¼ ê¸€ì”¨ëŠ” ê²€ì •ìœ¼ë¡œ ê°€ë…ì„± í™•ë³´ */
      background-color: var(--primary);
      transition: opacity 0.3s;
    }
    .action-btn:disabled {
      background-color: #444;
      color: #888;
      cursor: not-allowed;
    }

    /* ì ‘ê·¼ì„± íŒíŠ¸ */
    .a11y-hint {
      margin-top: 10px;
      font-size: 14px;
      color: #666;
      text-align: center;
    }
  </style>
</head>
<body>

  <div class="container">
    <header>
      <h1>ë‘ë‡Œ íŠ¼íŠ¼ í€´ì¦ˆ</h1>
      <p class="desc" id="storyTitle">ìˆœì„œëŒ€ë¡œ ëˆŒëŸ¬ë³´ì„¸ìš”</p>
    </header>

    <div class="progress-bar" id="progressBar"></div>

    <div class="slots-area" id="slotsArea"></div>
    <div class="a11y-hint">â€» ìœ„ ì¹¸ì„ ëˆ„ë¥´ë©´ ë‹¤ì‹œ ì·¨ì†Œë©ë‹ˆë‹¤.</div>

    <div style="margin: 20px 0;"></div>

    <div class="options-area" id="optionsArea"></div>

    <div class="result-area">
      <div id="message" class="message"></div>
      <button id="mainBtn" class="action-btn" onclick="checkAnswer()">ì •ë‹µ í™•ì¸í•˜ê¸°</button>
    </div>
  </div>

  <script>
    /**
     * [ë¬¸ì œ ë°ì´í„° ìˆ˜ì •]
     * ì–´ë¥´ì‹ ë“¤ì´ í—·ê°ˆë¦¬ì§€ ì•Šë„ë¡ ì¸ê³¼ê´€ê³„ê°€ ì•„ì£¼ ëª…í™•í•œ ìì—°/ì¼ìƒ ì†Œì¬ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.
     */
    const quizData = [
      {
        title: "ì‹ë¬¼ í‚¤ìš°ê¸°",
        steps: ["ì”¨ì•—ì„ ì‹¬ëŠ”ë‹¤", "ì‹¹ì´ ë‚˜ì˜¨ë‹¤", "ê½ƒì´ í•€ë‹¤"]
      },
      {
        title: "ì–‘ì¹˜ì§ˆ í•˜ê¸°",
        steps: ["ì¹˜ì•½ì„ ì§ ë‹¤", "ì´ë¥¼ ë‹¦ëŠ”ë‹¤", "ë¬¼ë¡œ í—¹êµ°ë‹¤"]
      },
      {
        title: "ì„¤ê±°ì§€ í•˜ê¸°",
        steps: ["ìˆ˜ì„¸ë¯¸ì— ì„¸ì œë¥¼ ë¬»íŒë‹¤", "ê·¸ë¦‡ì„ ë‹¦ëŠ”ë‹¤", "ë¬¼ë¡œ í—¹êµ°ë‹¤"]
      }
    ];

    let currentIdx = 0;
    let currentSlots = [null, null, null]; 
    let shuffledOptions = []; // í˜„ì¬ ë¬¸ì œì˜ ì„ì¸ ë³´ê¸°ë“¤
    let isFinished = false;

    const els = {
      title: document.getElementById('storyTitle'),
      progress: document.getElementById('progressBar'),
      slots: document.getElementById('slotsArea'),
      options: document.getElementById('optionsArea'),
      msg: document.getElementById('message'),
      btn: document.getElementById('mainBtn')
    };

    function initQuiz() {
      // ìƒíƒœ ì´ˆê¸°í™”
      currentSlots = [null, null, null];
      isFinished = false;
      els.msg.textContent = "";
      els.msg.className = "message";
      
      els.btn.textContent = "ì •ë‹µ í™•ì¸í•˜ê¸°";
      els.btn.onclick = checkAnswer;
      els.btn.disabled = true;

      const data = quizData[currentIdx];
      els.title.textContent = `[ë¬¸ì œ ${currentIdx + 1}] ${data.title}`;

      // ì§„í–‰ë°” ê·¸ë¦¬ê¸°
      els.progress.innerHTML = '';
      quizData.forEach((_, i) => {
        const dot = document.createElement('div');
        dot.className = `dot ${i === currentIdx ? 'active' : ''}`;
        els.progress.appendChild(dot);
      });

      // ë³´ê¸° ì„ê¸° (ë¬¸ì œ ì‹œì‘í•  ë•Œ ë”± í•œ ë²ˆë§Œ ìˆ˜í–‰)
      // ì›ë³¸ í…ìŠ¤íŠ¸ì™€ ì›ë˜ ì¸ë±ìŠ¤ë¥¼ ê°ì²´ë¡œ ì €ì¥
      shuffledOptions = data.steps.map((text, idx) => ({ text, originalIdx: idx }));
      shuffleArray(shuffledOptions);

      render();
    }

    // í™”ë©´ ê·¸ë¦¬ê¸° í†µí•© í•¨ìˆ˜
    function render() {
      renderSlots();
      renderOptions();
      
      // 3ì¹¸ ë‹¤ ì°¼ëŠ”ì§€ í™•ì¸í•´ì„œ ë²„íŠ¼ í™œì„±í™”
      const allFilled = currentSlots.every(s => s !== null);
      if (!isFinished) {
        els.btn.disabled = !allFilled;
      }
    }

    function renderSlots() {
      els.slots.innerHTML = "";
      for(let i=0; i<3; i++) {
        const slot = document.createElement('div');
        const item = currentSlots[i];
        
        slot.className = item ? "slot filled" : "slot";
        slot.setAttribute('data-num', i + 1);
        
        if (item) {
          slot.textContent = item.text;
          // í´ë¦­ ì‹œ ì·¨ì†Œ
          slot.onclick = () => {
            if(!isFinished) {
              currentSlots[i] = null;
              render();
            }
          };
        } else {
          slot.textContent = "ì—¬ê¸°ë¥¼ ëˆŒëŸ¬ ì„ íƒí•˜ì„¸ìš”";
          // ë¹ˆì¹¸ í´ë¦­ ì‹œì—” ì•„ë¬´ ë™ì‘ ì•ˆí•¨ (ë³´ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ì•¼ í•¨)
          slot.style.color = "#555"; 
          slot.style.fontSize = "16px";
        }
        els.slots.appendChild(slot);
      }
    }

    function renderOptions() {
      els.options.innerHTML = "";
      shuffledOptions.forEach((opt) => {
        const btn = document.createElement('div');
        btn.className = "option-btn";
        btn.textContent = opt.text;

        // ì´ë¯¸ ìŠ¬ë¡¯ì— ì„ íƒëœ ë…€ì„ì¸ì§€ í™•ì¸
        const isSelected = currentSlots.some(s => s && s.text === opt.text);
        
        if (isSelected) {
          btn.classList.add('selected');
        } else {
          // ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ í´ë¦­ ì´ë²¤íŠ¸ ì—°ê²°
          if (!isFinished) {
            btn.onclick = () => selectOption(opt);
          }
        }
        els.options.appendChild(btn);
      });
    }

    function selectOption(optItem) {
      // ì•ì—ì„œë¶€í„° ë¹ˆì¹¸ ì°¾ê¸°
      const emptyIdx = currentSlots.findIndex(item => item === null);
      if (emptyIdx === -1) return; // ê½‰ ì°¼ìœ¼ë©´ ë¬´ì‹œ

      currentSlots[emptyIdx] = optItem;
      render();
    }

    function checkAnswer() {
      const data = quizData[currentIdx];
      // ì‚¬ìš©ìê°€ ì±„ìš´ í…ìŠ¤íŠ¸ ë°°ì—´
      const userAnswers = currentSlots.map(s => s.text);
      
      // ì›ë³¸ ì •ë‹µ ë°°ì—´ê³¼ ë¹„êµ
      const isCorrect = JSON.stringify(userAnswers) === JSON.stringify(data.steps);

      if (isCorrect) {
        els.msg.textContent = "ì •ë‹µì…ë‹ˆë‹¤! ì°¸ ì˜í•˜ì…¨ì–´ìš” ğŸ‘";
        els.msg.className = "message good";
        els.btn.textContent = "ë‹¤ìŒ ë¬¸ì œ í’€ê¸°";
        els.btn.disabled = false;
        els.btn.onclick = nextQuiz;
        isFinished = true;
        
        // ì •ë‹µ ì‹œ ë³´ê¸° ë²„íŠ¼ë“¤ ë¹„í™œì„±í™” ì²˜ë¦¬ (UI ê°±ì‹ )
        render(); 
      } else {
        els.msg.textContent = "ìˆœì„œê°€ ì¡°ê¸ˆ ë‹¬ë¼ìš”. ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”.";
        els.msg.className = "message bad";
        
        // í‹€ë ¸ì„ ë•Œ ì‹œê°ì  í”¼ë“œë°± (í…Œë‘ë¦¬ ë¶‰ê²Œ)
        els.slots.style.borderColor = "var(--wrong)";
        setTimeout(() => els.slots.style.borderColor = "#555", 1000);
      }
    }

    function nextQuiz() {
      currentIdx++;
      if (currentIdx >= quizData.length) {
        // ì—”ë”© í™”ë©´
        document.body.innerHTML = `
          <div class="container" style="text-align:center; padding-top:50px; border:1px solid #333;">
            <h1 style="color:var(--primary)">ê±´ê°•í•œ ë‘ë‡Œ ì™„ì„±!</h1>
            <p style="font-size:20px; line-height:1.6; color:#ddd;">
              ëª¨ë“  ë¬¸ì œë¥¼ í›Œë¥­í•˜ê²Œ ë§ì¶”ì…¨ìŠµë‹ˆë‹¤.<br>
              ì˜¤ëŠ˜ë„ ê¸°ë¶„ ì¢‹ì€ í•˜ë£¨ ë³´ë‚´ì„¸ìš”.
            </p>
            <button class="action-btn" onclick="location.reload()" style="margin-top:40px;">ì²˜ìŒë¶€í„° ë‹¤ì‹œ í•˜ê¸°</button>
          </div>
        `;
      } else {
        initQuiz();
      }
    }

    function shuffleArray(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    // ì•± ì‹œì‘
    initQuiz();

  </script>
</body>
</html>
